# GameReportScreen - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞ —à–∞—Ö–º–∞—Ç–Ω–æ–π –ø–∞—Ä—Ç–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω `GameReportScreen` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —à–∞—Ö–º–∞—Ç–Ω—ã—Ö –ø–∞—Ä—Ç–∏–π, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂–∏–π –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å chess.com.

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **GameReportScreen.kt** - –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
2. **GameReportViewModel.kt** - ViewModel —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏
3. **EvalBar.kt** - –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ü–µ–Ω–∫–∏ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
4. **BoardCanvas.kt** - –®–∞—Ö–º–∞—Ç–Ω–∞—è –¥–æ—Å–∫–∞ —Å Canvas
5. **MovesCarousel.kt** - –ö–∞—Ä—É—Å–µ–ª—å —Ö–æ–¥–æ–≤ —Å center-snapping
6. **IconsMapping.kt** - –ú–∞–ø–ø–∏–Ω–≥ MoveClass –Ω–∞ –∏–∫–æ–Ω–∫–∏ –∏ —Ü–≤–µ—Ç–∞
7. **GameReportScreenPreview.kt** - –ü—Ä–µ–≤—å—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### TopAppBar
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–û—Ç—á—ë—Ç –æ –ø–∞—Ä—Ç–∏–∏"
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
- –ò–∫–æ–Ω–∫–∏ –ø–æ–∏—Å–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### Coach Bubble
- –ê–≤–∞—Ç–∞—Ä —Ç—Ä–µ–Ω–µ—Ä–∞
- –û–±–ª–∞–∫–æ —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ö–æ–¥–∞
- –ò–∫–æ–Ω–∫–∞ —Ç–∏–ø–∞ —Ö–æ–¥–∞ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π, –∑–µ–≤–æ–∫ –∏ —Ç.–¥.)
- –ë–µ–π–¥–∂ –æ—Ü–µ–Ω–∫–∏ (+0.21, -3.48)
- –û–ø–∏—Å–∞–Ω–∏–µ —Ö–æ–¥–∞

#### –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å
- **EvalBar**: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ü–µ–Ω–∫–∏
  - –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
  - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π (-8 –¥–æ +8 –ø–µ—à–µ–∫)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Ç–∞ (–ø—Ä–∏–∂–∏–º–∞–µ—Ç—Å—è –∫ –∫—Ä–∞—è–º)
  - –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–æ–∑–∏—Ü–∏–∏

- **BoardCanvas**: –®–∞—Ö–º–∞—Ç–Ω–∞—è –¥–æ—Å–∫–∞
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä –∏–∑ SVG –∞—Å—Å–µ—Ç–æ–≤ (assets/fresca/)
  - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ö–æ–¥–∞
  - –°—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ–¥–∞
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ FEN –Ω–æ—Ç–∞—Ü–∏–∏

#### –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å
- **MovesCarousel**: –ö–∞—Ä—É—Å–µ–ª—å —Ö–æ–¥–æ–≤
  - Center-snapping —Å Accompanist Snapper
  - –ß–∏–ø—ã –∫–∞—á–µ—Å—Ç–≤–∞ —Ö–æ–¥–æ–≤ –ø–æ MoveClass
  - –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ö–æ–¥–∞

- **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π**:
  - "–ü–æ–∫–∞–∑–∞—Ç—å" - –ø–æ–∫–∞–∑–∞—Ç—å —Ö–æ–¥
  - "–õ—É—á—à–∏–µ" - –ª—É—á—à–∏–µ —Ö–æ–¥—ã
  - "–ü–æ–≤—Ç–æ—Ä" - –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
  - "–î–∞–ª–µ–µ" - —Å–ª–µ–¥—É—é—â–∏–π –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç

### üé® –î–∏–∑–∞–π–Ω

- **Material 3** –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞
- **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** –∫–∞–∫ –≤ chess.com
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤
- **–ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏** –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π screen readers

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### ViewModel
```kotlin
data class GameReportUiState(
    val currentPlyIndex: Int,
    val currentFen: String,
    val lastMove: Pair<String, String>?,
    val showArrows: Boolean
)

sealed interface GameReportIntent {
    data object GoStart : GameReportIntent
    data object GoPrev : GameReportIntent
    data object GoNext : GameReportIntent
    data object GoEnd : GameReportIntent
    data class SeekTo(val plyIndex: Int) : GameReportIntent
    data class ToggleArrows(val enabled: Boolean) : GameReportIntent
}
```

#### EvalBar
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è: `t = (evaluation + cap) / (2 * cap)`
- –ê–Ω–∏–º–∞—Ü–∏—è: `animateFloatAsState` —Å `spring` –∏ `tween`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Ç–∞: –ø—Ä–∏–∂–∏–º–∞–µ—Ç—Å—è –∫ –∫—Ä–∞—è–º

#### BoardCanvas
- Canvas –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–ª–µ—Ç–æ–∫ –∏ –ø–æ–¥—Å–≤–µ—Ç–æ–∫
- SVG —Ñ–∏–≥—É—Ä—ã –∏–∑ assets/fresca/
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ lastMove
- –°—Ç—Ä–µ–ª–∫–∏ —Å –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫–∞–º–∏

#### MovesCarousel
- LazyRow + Snapper –¥–ª—è center-snapping
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ currentPlyIndex
- –ß–∏–ø—ã –∫–∞—á–µ—Å—Ç–≤–∞ —Ö–æ–¥–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏

### üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```kotlin
@Composable
fun MyScreen() {
    val report = // –≤–∞—à FullReport
    
    GameReportScreen(
        report = report,
        onBack = { /* –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ */ },
        onNextKeyMoment = { /* —Å–ª–µ–¥—É—é—â–∏–π –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç */ }
    )
}
```

### üéØ –ü—Ä–µ–≤—å—é

–°–æ–∑–¥–∞–Ω—ã –ø—Ä–µ–≤—å—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- `GameReportScreenPreview()` - —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
- `GameReportScreenDarkPreview()` - —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `build.gradle.kts`:
```kotlin
implementation("dev.chrisbanes.snapper:snapper:0.3.0")
```

### üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
ui/
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îú‚îÄ‚îÄ GameReportScreen.kt
‚îÇ   ‚îú‚îÄ‚îÄ GameReportViewModel.kt
‚îÇ   ‚îî‚îÄ‚îÄ GameReportScreenPreview.kt
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ EvalBar.kt
    ‚îú‚îÄ‚îÄ BoardCanvas.kt
    ‚îú‚îÄ‚îÄ MovesCarousel.kt
    ‚îî‚îÄ‚îÄ IconsMapping.kt
```

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–≠–∫—Ä–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Material Design –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂–∏–π –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å chess.com.

### üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–∏–∑–∞–π–Ω–∞

- **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞**: –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ —Å –∞–∫—Ü–µ–Ω—Ç–∞–º–∏ –∫–∞–∫ –≤ chess.com
- **–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞**: Material 3 —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
- **–ò–∫–æ–Ω–∫–∏**: Material Design –∏–∫–æ–Ω–∫–∏ –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤

–≠–∫—Ä–∞–Ω –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é!
